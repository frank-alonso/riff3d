---
phase: 01-contracts-testing-spine
plan: 07
type: execute
wave: 5
depends_on: ["01-06"]
files_modified:
  - .planning/reviews/phase-01/plan-summary.md
  - .planning/reviews/phase-01/evidence-packet.md
  - .planning/reviews/phase-01/gate-decision.md
autonomous: false
requirements: []

must_haves:
  truths:
    - "Pre-execution plan review is completed by Codex (advisory feedback incorporated)"
    - "Post-execution evidence packet documents all success criteria with proof"
    - "Gate decision is recorded (PASS, PASS_WITH_CONDITIONS, or FAIL)"
    - "All 12 Phase 1 success criteria from ROADMAP.md are verified with evidence"
  artifacts:
    - path: ".planning/reviews/phase-01/evidence-packet.md"
      provides: "Evidence packet documenting all success criteria with test results"
    - path: ".planning/reviews/phase-01/gate-decision.md"
      provides: "Final gate decision from Codex review"
  key_links:
    - from: ".planning/reviews/phase-01/evidence-packet.md"
      to: "all test results"
      via: "references test output and CI results"
      pattern: "test.*pass"
---

<objective>
Execute the Phase Review Protocol: pre-execution plan review (advisory) and post-execution evidence audit with gate decision. This validates that all Phase 1 contracts, tests, and conformance infrastructure meet the success criteria before Phase 2 builds on top of them.

Purpose: The review gate prevents building on a weak foundation. Codex CLI performs an independent audit to catch issues Claude might miss.

Output: Review artifacts in `.planning/reviews/phase-01/` with a gate decision.
</objective>

<execution_context>
@/home/frank/.claude/get-shit-done/workflows/execute-plan.md
@/home/frank/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/PHASE_REVIEW_PROTOCOL.md
@.planning/phases/01-contracts-testing-spine/01-01-SUMMARY.md
@.planning/phases/01-contracts-testing-spine/01-02-SUMMARY.md
@.planning/phases/01-contracts-testing-spine/01-03-SUMMARY.md
@.planning/phases/01-contracts-testing-spine/01-04-SUMMARY.md
@.planning/phases/01-contracts-testing-spine/01-05-SUMMARY.md
@.planning/phases/01-contracts-testing-spine/01-06-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Compile evidence packet and run full test suite</name>
  <files>
    .planning/reviews/phase-01/evidence-packet.md
  </files>
  <action>
    1. Run the full test suite: `pnpm turbo typecheck lint test`
    2. Capture test output (pass/fail counts per package)
    3. Run conformance suite explicitly: `pnpm --filter @riff3d/conformance test`
    4. Run benchmarks: `pnpm --filter @riff3d/conformance bench` (if configured)
    5. Compile evidence packet documenting each of the 12 Phase 1 success criteria:

       For each criterion, provide:
       - The criterion text
       - Evidence (test output, file paths, code snippets)
       - Status: PASS or FAIL
       - Notes on any caveats

    6. Write to `.planning/reviews/phase-01/evidence-packet.md`
  </action>
  <verify>
    Evidence packet exists and covers all 12 success criteria.
    Full test suite passes.
  </verify>
  <done>
    Evidence packet is compiled with proof for all Phase 1 success criteria. Each criterion entry includes a test output snippet, file path, or CI link as proof â€” not prose only.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Phase 1 gate review -- human verification of evidence packet</name>
  <files>.planning/reviews/phase-01/evidence-packet.md</files>
  <action>
    Present the evidence packet to the user for review. The packet covers all 12 Phase 1 success criteria with proof (test results, file paths, code snippets). Optionally run Codex independent audit via `./scripts/codex-review.sh post-review 01`.

    What was built: Complete Phase 1 evidence packet with all contracts, tests, and conformance results.
  </action>
  <verify>
    1. Review the evidence packet at `.planning/reviews/phase-01/evidence-packet.md`
    2. Run `pnpm turbo typecheck lint test` to verify all tests pass
    3. Optionally run `./scripts/codex-review.sh post-review 01` for independent Codex audit
    4. Review gate decision
  </verify>
  <done>
    User has reviewed and approved the Phase 1 gate, or identified issues to address. Gate decision recorded.
    Resume signal: Type "approved" to accept the Phase 1 gate, or describe issues to address.
  </done>
</task>

</tasks>

<verification>
- Evidence packet covers all 12 success criteria
- Full test suite passes
- Gate decision recorded
</verification>

<success_criteria>
Phase 1 review is complete with a gate decision. If PASS or PASS_WITH_CONDITIONS, Phase 2 can proceed. If FAIL, gap closure plans are created.
</success_criteria>

<output>
After completion, create `.planning/phases/01-contracts-testing-spine/01-07-SUMMARY.md`
</output>
